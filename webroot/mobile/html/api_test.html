<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1, user-scalable=0" /><!--设置视窗宽为设备宽度，默认不缩放，不允许用户缩放-->
    <meta name="apple-mobile-web-app-capable" content="yes" /><!--在iOS中 隐藏工具栏和菜单栏-->
    <meta name="format-detection" content="email=no" /><!--忽略电话号码和邮箱识别-->
    <title>TEST API</title>
    <script src="/mobile/js/jsapi.js"></script>
</head>
<body>
<style>

    dl, dt, dd, a, ul, li, ol {
        border: 1px solid #999;
        list-style: outside none none;
        padding: 5px;
    }
</style>

<ul>
    <li onclick="LEMON.db.set('name','kate');"> LEMON.db.set('name','kate')</li>
    <li onclick="alert(2);testset();"> testset();</li>
    <li onclick="alert(LEMON.db.get('name'))">LEMON.db.get('name')</li>
    <li onclick="alert(LEMON.sys.version())">LEMON.sys.version() 当前版本号</li>
    <li onclick="LEMON.sys.QRcode()">LEMON.sys.QRcode()扫二维码</li>
    <li onclick="LEMON.login.wx(callback)">LEMON.login.wx(callback)</li>
    <li onclick="LEMON.event.getLocation(callback)">LEMON.event.getLocation(callback)</li>
    <li onclick="LEMON.event.tel(10086)">LEMON.event.tel(10086)</li>
    <li onclick="LEMON.event.uploadPhoto('\'url_query\':\'?dir=user/avatar&zip=1\'', callback)">LEMON.event.uploadPhoto("'url_query':'?dir=user/avatar&zip=1'}",callback)</li>
    <li onclick="LEMON.event.reuploadPhoto(callback)">LEMON.event.reuploadPhoto(callback)</li>

    <li onclick="LEMON.login.wx(callback)">LEMON.login.wx(callback)  微信登录</li>
    <!--<li onclick="LEMON.login.wx(function(code){alert(12);alert(code);alert('code:'+code)})">LEMON.login.wx(function(code){alert('code:'+code)})  微信登录</li>-->
    <li onclick="LEMON.hide.share()">LEMON.hide.share()  隐藏分享图标</li>
    <li onclick="LEMON.sys.back('http://m.chinamatop.com/')">LEMON.sys.back('http://m.chinamatop.com/') 设置点击返回的跳转链接</li>
    <li onclick="LEMON.show.search('test url')">LEMON.show.search('test url') 显示搜索图标</li>

    <li onclick="LEMON.share.banner()">LEMON.share.banner() 分享条,可能分享部分用到的很少,直接原生的</li>
    <li onclick="LEMON.share.QQ(callback)">LEMON.share.QQ(callback) 分享QQ空间</li>
    <li onclick="LEMON.share.QQfriend(callback)">LEMON.share.QQfriend(callback) 分享QQ好友</li>
    <li onclick="LEMON.share.WX(callback)">LEMON.share.WX(callback) 分享微信朋友圈</li>
    <li onclick="LEMON.share.WXfriend(callback)">LEMON.share.WXfriend(callback) 分享微信好友</li>
    <li onclick="LEMON.share.WB(callback)">LEMON.share.WB(callback) 分享微博</li>
</ul>

<br>
</body>
</html>

<script>
    /**

    "hide.share", //隐藏分享图标
            "show.search", //显示搜索
            "share.QQ",
            "share.QQfriend",
            "share.WX",
            "share.WXfriend",
            "env.hasQQ",
            "env.hasWX",
            'login.wx',
            "event.getLocation",
            "event.tel",
            "event.uploadPhoto",
            "event.reuploadPhoto"
    */
    function callback(re){
		alert(re);
    }

    function testset()
    {
        LEMON.db.set('name','kate');
        LEMON.db.set('name2','kate2');
        LEMON.db.set('name3','kate3');
        LEMON.db.set('name4','kate4');
        LEMON.db.set('name5','kate5');
        LEMON.db.set('name6','kate6');
    }






    window.onerror = function (a,b,c,d,e) {
        function f(a) {
            var b, c;
            if ("object" == typeof a) {
                if (null === a)
                    return "null";
                if (window.JSON && window.JSON.stringify)
                    return JSON.stringify(a);
                c = g(a), b = [];
                for (var d in a)
                    b.push(( c ? "" : '"' + d + '":') + f(a[d]));
                return b = b.join(), c ? "[" + b + "]" : "{" + b + "}";
            }
            return "undefined" == typeof a ? "undefined" : "number" == typeof a || "function" == typeof a ? a.toString() : a ? '"' + a + '"' : '""';
        }

        function g(a) {
            return "[object Array]" == Object.prototype.toString.call(a);
        }

        var h, i = window;
        if ( d = d || i.event && i.event.errorCharacter || 0, e && e.stack){
            a = e.stack.toString();
        }
        else if (arguments.callee) {
            for (var j = [a], k = arguments.callee.caller, l = 3; k && --l > 0 && (j.push(k.toString()), k !== k.caller); )
                k = k.caller;
            j = j.join(","), a = j;
        }
        if ( h = f(a) + ( b ? ";URL:" + b : "") + ( c ? ";Line:" + c : "") + ( d ? ";Column:" + d : ""), i._last_err_msg) {
            if (i._last_err_msg.indexOf(a) > -1)
                return;
            i._last_err_msg += "|" + a;
        } else
            i._last_err_msg = a;

        setTimeout(function() {
            console.log("ERROR:" + h);
            alert(h);
            //var a = encodeURIComponent(h), b = new Image;
            //b.src = "//wq.jd.com/webmonitor/collect/badjs.json?Content=" + a + "&t=" + Math.random();
            //当前用户登录ID、时间、手机号码、上报URL
            //b.src = "/BadJS/index.html?Content=" + a + "&t=" + Math.random();

        }, 500);

        return !1
    };
</script>



